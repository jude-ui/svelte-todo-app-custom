import{SvelteComponent as z,append as g,attr as L,binding_callbacks as B,check_outros as O,component_subscribe as E,create_component as v,destroy_component as $,detach as C,element as w,empty as D,group_outros as M,init as G,insert as R,listen as H,mount_component as S,noop as K,outro_and_destroy_block as P,run_all as Q,safe_not_equal as U,set_store_value as j,space as T,toggle_class as y,transition_in as p,transition_out as h,update_keyed_each as V}from"../_snowpack/pkg/svelte/internal.js";import W from"../_snowpack/pkg/sortablejs.js";import{onMount as X}from"../_snowpack/pkg/svelte.js";import{todos as I,initStorage as Y,isListRecent as J,saveStorage as Z,todosOrder as x}from"./store/index.js";import ee from"./components/Todo.svelte.js";import te from"./components/CreateTodo.svelte.js";import ne from"./components/ListOrderSetting.svelte.js";import oe from"./components/CommonLayer.svelte.js";function N(i,t,o){const n=i.slice();return n[13]=t[o],n}function q(i){let t,o,n,c,a,m,r,f,k,b,e=i[0]&&A(i);return r=new ne({}),{c(){t=w("div"),o=w("button"),o.innerHTML='\uC804\uCCB4 \uC0AD\uC81C<span class="material-icons-outlined ico_delete" aria-hidden="true">delete</span>',n=T(),e&&e.c(),c=T(),a=w("button"),a.innerHTML='\uC21C\uC11C \uBCC0\uACBD<span class="material-icons-outlined ico_change" aria-hidden="true">swap_vert</span>',m=T(),v(r.$$.fragment),L(o,"type","button"),L(o,"class","btn btn_danger btn_init"),L(a,"type","button"),L(a,"class","btn btn_danger btn_order_change"),L(t,"class","info_setting")},m(u,_){R(u,t,_),g(t,o),g(t,n),e&&e.m(t,null),g(t,c),g(t,a),g(t,m),S(r,t,null),f=!0,k||(b=[H(o,"click",i[4]),H(a,"click",i[7])],k=!0)},p(u,_){u[0]?e?(e.p(u,_),_&1&&p(e,1)):(e=A(u),e.c(),p(e,1),e.m(t,c)):e&&(M(),h(e,1,1,()=>{e=null}),O())},i(u){f||(p(e),p(r.$$.fragment,u),f=!0)},o(u){h(e),h(r.$$.fragment,u),f=!1},d(u){u&&C(t),e&&e.d(),$(r),k=!1,Q(b)}}}function A(i){let t,o;return t=new oe({props:{tit_layer:"Todo \uBAA9\uB85D\uC744 \uBAA8\uB450 \uC0AD\uC81C\uD558\uACA0\uC2B5\uB2C8\uAE4C?",btn_fn1:i[5],btn_fn2:i[6]}}),{c(){v(t.$$.fragment)},m(n,c){S(t,n,c),o=!0},p:K,i(n){o||(p(t.$$.fragment,n),o=!0)},o(n){h(t.$$.fragment,n),o=!1},d(n){$(t,n)}}}function F(i,t){let o,n,c;return n=new ee({props:{todo:t[13]}}),{key:i,first:null,c(){o=D(),v(n.$$.fragment),this.first=o},m(a,m){R(a,o,m),S(n,a,m),c=!0},p(a,m){t=a;const r={};m&8&&(r.todo=t[13]),n.$set(r)},i(a){c||(p(n.$$.fragment,a),c=!0)},o(a){h(n.$$.fragment,a),c=!1},d(a){a&&C(o),$(n,a)}}}function le(i){let t,o,n,c,a,m,r,f=[],k=new Map,b;c=new te({});let e=i[3].length&&q(i),u=i[3];const _=l=>l[13].id;for(let l=0;l<u.length;l+=1){let s=N(i,u,l),d=_(s);k.set(d,f[l]=F(d,s))}return{c(){t=w("div"),o=w("h1"),o.textContent="Todo List",n=T(),v(c.$$.fragment),a=T(),e&&e.c(),m=T(),r=w("ul");for(let l=0;l<f.length;l+=1)f[l].c();L(o,"class","tit_todo"),L(r,"class","list_todo"),y(r,"active",i[3].length),y(r,"edit_on",i[1]),L(t,"class","container")},m(l,s){R(l,t,s),g(t,o),g(t,n),S(c,t,null),g(t,a),e&&e.m(t,null),g(t,m),g(t,r);for(let d=0;d<f.length;d+=1)f[d].m(r,null);i[8](r),b=!0},p(l,[s]){l[3].length?e?(e.p(l,s),s&8&&p(e,1)):(e=q(l),e.c(),p(e,1),e.m(t,m)):e&&(M(),h(e,1,1,()=>{e=null}),O()),s&8&&(u=l[3],M(),f=V(f,s,_,1,l,u,k,r,P,F,null,N),O()),s&8&&y(r,"active",l[3].length),s&2&&y(r,"edit_on",l[1])},i(l){if(!b){p(c.$$.fragment,l),p(e);for(let s=0;s<u.length;s+=1)p(f[s]);b=!0}},o(l){h(c.$$.fragment,l),h(e);for(let s=0;s<f.length;s+=1)h(f[s]);b=!1},d(l){l&&C(t),$(c),e&&e.d();for(let s=0;s<f.length;s+=1)f[s].d();i[8](null)}}}function re(i,t,o){let n,c;E(i,I,d=>o(3,n=d)),E(i,J,d=>o(10,c=d));const a=localStorage.getItem("todos");a&&j(I,n=JSON.parse(a),n);const m=localStorage.getItem("isListRecent");JSON.parse(m)||(j(J,c=!0,c),j(I,n=n.reverse(),n),Z());let r=!1;function f(){o(0,r=!0)}function k(){j(I,n=[],n),Y(),o(0,r=!1),o(1,e=!1)}function b(){o(0,r=!1)}let e=!1;function u(){o(1,e=!e)}let _,l;X(()=>{l=new W(_,{group:"Todo Lists",handle:".list_todo .btn_move",delay:50,animation:0,forceFallback:!0,onEnd(d){x({oldIndex:d.oldIndex,newIndex:d.newIndex})}})});function s(d){B[d?"unshift":"push"](()=>{_=d,o(2,_)})}return[r,e,_,n,f,k,b,u,s]}class se extends z{constructor(t){super();G(this,t,re,le,U,{})}}export default se;
