import{SvelteComponent as X,append as b,attr as k,binding_callbacks as Y,check_outros as C,component_subscribe as M,create_component as I,destroy_component as $,detach as R,element as y,empty as Z,group_outros as D,init as x,insert as E,listen as H,mount_component as v,noop as J,outro_and_destroy_block as ee,run_all as te,safe_not_equal as ne,set_store_value as j,space as S,toggle_class as A,transition_in as m,transition_out as h,update_keyed_each as oe}from"../_snowpack/pkg/svelte/internal.js";import le from"../_snowpack/pkg/sortablejs.js";import{onMount as re}from"../_snowpack/pkg/svelte.js";import{todos as O,initStorage as se,isListRecent as N,saveStorage as q,todosOrder as ie,selectedTodoItem as F}from"./store/index.js";import fe from"./components/Todo.svelte.js";import ae from"./components/CreateTodo.svelte.js";import ce from"./components/ListOrderSetting.svelte.js";import z from"./components/CommonLayer.svelte.js";function B(s,e,o){const l=s.slice();return l[18]=e[o],l}function G(s){let e,o,l,r,f,_,c,u,T,p,a,d,w,t=s[0]&&K(s),n=s[3]&&P(s);return p=new ce({}),{c(){e=y("div"),o=y("button"),o.innerHTML='\uC804\uCCB4 \uC0AD\uC81C<span class="material-icons-outlined ico_delete" aria-hidden="true">delete</span>',l=S(),t&&t.c(),r=S(),f=y("button"),f.innerHTML='\uC21C\uC11C \uBCC0\uACBD<span class="material-icons-outlined ico_change" aria-hidden="true">swap_vert</span>',_=S(),c=y("button"),c.innerHTML='\uC120\uD0DD \uC0AD\uC81C<span class="material-icons-outlined ico_delete" aria-hidden="true">delete</span>',u=S(),n&&n.c(),T=S(),I(p.$$.fragment),k(o,"type","button"),k(o,"class","btn btn_danger btn_init"),k(f,"type","button"),k(f,"class","btn btn_primary btn_order_change"),k(c,"type","button"),k(c,"class","btn btn_primary btn_order_change"),k(e,"class","info_setting")},m(i,L){E(i,e,L),b(e,o),b(e,l),t&&t.m(e,null),b(e,r),b(e,f),b(e,_),b(e,c),b(e,u),n&&n.m(e,null),b(e,T),v(p,e,null),a=!0,d||(w=[H(o,"click",s[5]),H(f,"click",s[8]),H(c,"click",s[9])],d=!0)},p(i,L){i[0]?t?(t.p(i,L),L&1&&m(t,1)):(t=K(i),t.c(),m(t,1),t.m(e,r)):t&&(D(),h(t,1,1,()=>{t=null}),C()),i[3]?n?(n.p(i,L),L&8&&m(n,1)):(n=P(i),n.c(),m(n,1),n.m(e,T)):n&&(D(),h(n,1,1,()=>{n=null}),C())},i(i){a||(m(t),m(n),m(p.$$.fragment,i),a=!0)},o(i){h(t),h(n),h(p.$$.fragment,i),a=!1},d(i){i&&R(e),t&&t.d(),n&&n.d(),$(p),d=!1,te(w)}}}function K(s){let e,o;return e=new z({props:{tit_layer:"Todo \uBAA9\uB85D\uC744 \uBAA8\uB450 \uC0AD\uC81C\uD558\uACA0\uC2B5\uB2C8\uAE4C?",btn_fn1:s[7],btn_fn2:s[6]}}),{c(){I(e.$$.fragment)},m(l,r){v(e,l,r),o=!0},p:J,i(l){o||(m(e.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),o=!1},d(l){$(e,l)}}}function P(s){let e,o;return e=new z({props:{tit_layer:"\uC120\uD0DD\uD55C Todo \uBAA9\uB85D\uC744 \uBAA8\uB450 \uC0AD\uC81C\uD558\uACA0\uC2B5\uB2C8\uAE4C?",btn_fn1:s[11],btn_fn2:s[10]}}),{c(){I(e.$$.fragment)},m(l,r){v(e,l,r),o=!0},p:J,i(l){o||(m(e.$$.fragment,l),o=!0)},o(l){h(e.$$.fragment,l),o=!1},d(l){$(e,l)}}}function Q(s,e){let o,l,r;return l=new fe({props:{todo:e[18]}}),{key:s,first:null,c(){o=Z(),I(l.$$.fragment),this.first=o},m(f,_){E(f,o,_),v(l,f,_),r=!0},p(f,_){e=f;const c={};_&16&&(c.todo=e[18]),l.$set(c)},i(f){r||(m(l.$$.fragment,f),r=!0)},o(f){h(l.$$.fragment,f),r=!1},d(f){f&&R(o),$(l,f)}}}function ue(s){let e,o,l,r,f,_,c,u=[],T=new Map,p;r=new ae({});let a=s[4].length&&G(s),d=s[4];const w=t=>t[18].id;for(let t=0;t<d.length;t+=1){let n=B(s,d,t),i=w(n);T.set(i,u[t]=Q(i,n))}return{c(){e=y("div"),o=y("h1"),o.textContent="Todo List",l=S(),I(r.$$.fragment),f=S(),a&&a.c(),_=S(),c=y("ul");for(let t=0;t<u.length;t+=1)u[t].c();k(o,"class","tit_todo"),k(c,"class","list_todo"),A(c,"active",s[4].length),A(c,"edit_on",s[1]),k(e,"class","container")},m(t,n){E(t,e,n),b(e,o),b(e,l),v(r,e,null),b(e,f),a&&a.m(e,null),b(e,_),b(e,c);for(let i=0;i<u.length;i+=1)u[i].m(c,null);s[12](c),p=!0},p(t,[n]){t[4].length?a?(a.p(t,n),n&16&&m(a,1)):(a=G(t),a.c(),m(a,1),a.m(e,_)):a&&(D(),h(a,1,1,()=>{a=null}),C()),n&16&&(d=t[4],D(),u=oe(u,n,w,1,t,d,T,c,ee,Q,null,B),C()),n&16&&A(c,"active",t[4].length),n&2&&A(c,"edit_on",t[1])},i(t){if(!p){m(r.$$.fragment,t),m(a);for(let n=0;n<d.length;n+=1)m(u[n]);p=!0}},o(t){h(r.$$.fragment,t),h(a);for(let n=0;n<u.length;n+=1)h(u[n]);p=!1},d(t){t&&R(e),$(r),a&&a.d();for(let n=0;n<u.length;n+=1)u[n].d();s[12](null)}}}function de(s,e,o){let l,r,f;M(s,F,g=>o(14,l=g)),M(s,O,g=>o(4,r=g)),M(s,N,g=>o(15,f=g));const _=localStorage.getItem("todos");_&&j(O,r=JSON.parse(_),r);const c=localStorage.getItem("isListRecent");JSON.parse(c)||(j(N,f=!0,f),j(O,r=r.reverse(),r),q());let u=!1;function T(){o(0,u=!0)}function p(){o(0,u=!1)}function a(){j(O,r=[],r),se(),o(0,u=!1),o(1,d=!1)}let d=!1;function w(){o(1,d=!d)}let t,n;re(()=>{n=new le(t,{group:"Todo Lists",handle:".list_todo .btn_move",delay:10,animation:0,forceFallback:!0,onEnd(g){ie({oldIndex:g.oldIndex,newIndex:g.newIndex})}})});let i=!1;function L(){!l.length||o(3,i=!0)}function U(){o(3,i=!1)}function V(){j(O,r=r.filter(g=>!l.includes(g.id)),r),q(),j(F,l=[],l),o(3,i=!1)}function W(g){Y[g?"unshift":"push"](()=>{t=g,o(2,t)})}return[u,d,t,i,r,T,p,a,w,L,U,V,W]}class me extends X{constructor(e){super();x(this,e,de,ue,ne,{})}}export default me;
