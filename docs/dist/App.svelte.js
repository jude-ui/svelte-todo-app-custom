import{SvelteComponent as X,append as b,attr as k,binding_callbacks as Y,check_outros as A,component_subscribe as E,create_component as j,destroy_component as I,detach as v,element as w,empty as Z,group_outros as M,init as x,insert as O,listen as H,mount_component as C,outro_and_destroy_block as ee,run_all as te,safe_not_equal as ne,set_store_value as y,space as L,text as J,toggle_class as R,transition_in as m,transition_out as h,update_keyed_each as oe}from"../_snowpack/pkg/svelte/internal.js";import le from"../_snowpack/pkg/sortablejs.js";import{onMount as re}from"../_snowpack/pkg/svelte.js";import{todos as D,initStorage as se,isListRecent as N,saveStorage as q,todosOrder as ie,selectedTodoItem as F}from"./store/index.js";import ce from"./components/Todo.svelte.js";import fe from"./components/CreateTodo.svelte.js";import ae from"./components/ListOrderSetting.svelte.js";import z from"./components/CommonLayer.svelte.js";function B(s,e,n){const o=s.slice();return o[18]=e[n],o}function G(s){let e,n,o,r,i,_,a,u,$,p,f,d,S,t=s[0]&&K(s),l=s[3]&&P(s);return p=new ae({}),{c(){e=w("div"),n=w("button"),n.innerHTML='\uC804\uCCB4 \uC0AD\uC81C<span class="material-icons-outlined ico_delete" aria-hidden="true">delete</span>',o=L(),t&&t.c(),r=L(),i=w("button"),i.innerHTML='\uC21C\uC11C \uBCC0\uACBD<span class="material-icons-outlined ico_change" aria-hidden="true">swap_vert</span>',_=L(),a=w("button"),a.innerHTML='\uC120\uD0DD \uC0AD\uC81C<span class="material-icons-outlined ico_delete" aria-hidden="true">delete</span>',u=L(),l&&l.c(),$=L(),j(p.$$.fragment),k(n,"type","button"),k(n,"class","btn btn_danger btn_init"),k(i,"type","button"),k(i,"class","btn btn_primary btn_order_change"),k(a,"type","button"),k(a,"class","btn btn_primary btn_order_change"),k(e,"class","info_setting")},m(c,T){O(c,e,T),b(e,n),b(e,o),t&&t.m(e,null),b(e,r),b(e,i),b(e,_),b(e,a),b(e,u),l&&l.m(e,null),b(e,$),C(p,e,null),f=!0,d||(S=[H(n,"click",s[5]),H(i,"click",s[8]),H(a,"click",s[9])],d=!0)},p(c,T){c[0]?t?(t.p(c,T),T&1&&m(t,1)):(t=K(c),t.c(),m(t,1),t.m(e,r)):t&&(M(),h(t,1,1,()=>{t=null}),A()),c[3]?l?(l.p(c,T),T&8&&m(l,1)):(l=P(c),l.c(),m(l,1),l.m(e,$)):l&&(M(),h(l,1,1,()=>{l=null}),A())},i(c){f||(m(t),m(l),m(p.$$.fragment,c),f=!0)},o(c){h(t),h(l),h(p.$$.fragment,c),f=!1},d(c){c&&v(e),t&&t.d(),l&&l.d(),I(p),d=!1,te(S)}}}function K(s){let e,n;return e=new z({props:{btn_fn1:s[7],btn_fn2:s[6],$$slots:{default:[ue]},$$scope:{ctx:s}}}),{c(){j(e.$$.fragment)},m(o,r){C(e,o,r),n=!0},p(o,r){const i={};r&2097152&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){I(e,o)}}}function ue(s){let e;return{c(){e=J("Todo \uBAA9\uB85D\uC744 \uBAA8\uB450 \uC0AD\uC81C\uD558\uACA0\uC2B5\uB2C8\uAE4C?")},m(n,o){O(n,e,o)},d(n){n&&v(e)}}}function P(s){let e,n;return e=new z({props:{btn_fn1:s[11],btn_fn2:s[10],$$slots:{default:[de]},$$scope:{ctx:s}}}),{c(){j(e.$$.fragment)},m(o,r){C(e,o,r),n=!0},p(o,r){const i={};r&2097152&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){I(e,o)}}}function de(s){let e;return{c(){e=J("\uC120\uD0DD\uD55C Todo \uBAA9\uB85D\uC744 \uBAA8\uB450 \uC0AD\uC81C\uD558\uACA0\uC2B5\uB2C8\uAE4C?")},m(n,o){O(n,e,o)},d(n){n&&v(e)}}}function Q(s,e){let n,o,r;return o=new ce({props:{todo:e[18]}}),{key:s,first:null,c(){n=Z(),j(o.$$.fragment),this.first=n},m(i,_){O(i,n,_),C(o,i,_),r=!0},p(i,_){e=i;const a={};_&16&&(a.todo=e[18]),o.$set(a)},i(i){r||(m(o.$$.fragment,i),r=!0)},o(i){h(o.$$.fragment,i),r=!1},d(i){i&&v(n),I(o,i)}}}function me(s){let e,n,o,r,i,_,a,u=[],$=new Map,p;r=new fe({});let f=s[4].length&&G(s),d=s[4];const S=t=>t[18].id;for(let t=0;t<d.length;t+=1){let l=B(s,d,t),c=S(l);$.set(c,u[t]=Q(c,l))}return{c(){e=w("div"),n=w("h1"),n.textContent="Todo List",o=L(),j(r.$$.fragment),i=L(),f&&f.c(),_=L(),a=w("ul");for(let t=0;t<u.length;t+=1)u[t].c();k(n,"class","tit_todo"),k(a,"class","list_todo"),R(a,"active",s[4].length),R(a,"edit_on",s[1]),k(e,"class","container")},m(t,l){O(t,e,l),b(e,n),b(e,o),C(r,e,null),b(e,i),f&&f.m(e,null),b(e,_),b(e,a);for(let c=0;c<u.length;c+=1)u[c].m(a,null);s[12](a),p=!0},p(t,[l]){t[4].length?f?(f.p(t,l),l&16&&m(f,1)):(f=G(t),f.c(),m(f,1),f.m(e,_)):f&&(M(),h(f,1,1,()=>{f=null}),A()),l&16&&(d=t[4],M(),u=oe(u,l,S,1,t,d,$,a,ee,Q,null,B),A()),l&16&&R(a,"active",t[4].length),l&2&&R(a,"edit_on",t[1])},i(t){if(!p){m(r.$$.fragment,t),m(f);for(let l=0;l<d.length;l+=1)m(u[l]);p=!0}},o(t){h(r.$$.fragment,t),h(f);for(let l=0;l<u.length;l+=1)h(u[l]);p=!1},d(t){t&&v(e),I(r),f&&f.d();for(let l=0;l<u.length;l+=1)u[l].d();s[12](null)}}}function _e(s,e,n){let o,r,i;E(s,F,g=>n(14,o=g)),E(s,D,g=>n(4,r=g)),E(s,N,g=>n(15,i=g));const _=localStorage.getItem("todos");_&&y(D,r=JSON.parse(_),r);const a=localStorage.getItem("isListRecent");JSON.parse(a)||(y(N,i=!0,i),y(D,r=r.reverse(),r),q());let u=!1;function $(){n(0,u=!0)}function p(){n(0,u=!1)}function f(){y(D,r=[],r),se(),n(0,u=!1),n(1,d=!1)}let d=!1;function S(){n(1,d=!d)}let t,l;re(()=>{l=new le(t,{group:"Todo Lists",handle:".list_todo .btn_move",delay:10,animation:0,forceFallback:!0,onEnd(g){ie({oldIndex:g.oldIndex,newIndex:g.newIndex})}})});let c=!1;function T(){!o.length||n(3,c=!0)}function U(){n(3,c=!1)}function V(){y(D,r=r.filter(g=>!o.includes(g.id)),r),q(),y(F,o=[],o),n(3,c=!1)}function W(g){Y[g?"unshift":"push"](()=>{t=g,n(2,t)})}return[u,d,t,c,r,$,p,f,S,T,U,V,W]}class pe extends X{constructor(e){super();x(this,e,_e,me,ne,{})}}export default pe;
