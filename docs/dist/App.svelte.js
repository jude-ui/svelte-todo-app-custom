import{SvelteComponent as z,append as h,attr as $,binding_callbacks as B,check_outros as R,component_subscribe as N,create_component as S,destroy_component as j,detach as L,element as w,empty as D,group_outros as M,init as G,insert as T,listen as K,mount_component as I,noop as P,outro_and_destroy_block as Q,safe_not_equal as U,set_store_value as O,space as v,transition_in as d,transition_out as _,update_keyed_each as V}from"../_snowpack/pkg/svelte/internal.js";import W from"../_snowpack/pkg/sortablejs.js";import{onMount as X}from"../_snowpack/pkg/svelte.js";import{todos as C,initStorage as Y,isListRecent as q,saveStorage as Z,todosOrder as x}from"./store/index.js";import ee from"./components/Todo.svelte.js";import te from"./components/CreateTodo.svelte.js";import oe from"./components/ListOrderSetting.svelte.js";import ne from"./components/CommonLayer.svelte.js";function A(f,e,n){const t=f.slice();return t[11]=e[n],t}function E(f){let e,n,t,a,s,u,o,r=[],p=new Map,b,g,y,c=f[0]&&F(f);s=new oe({});let m=f[2];const J=l=>l[11].id;for(let l=0;l<m.length;l+=1){let i=A(f,m,l),k=J(i);p.set(k,r[l]=H(k,i))}return{c(){e=w("div"),n=w("button"),n.innerHTML='\uC804\uCCB4 \uC0AD\uC81C<span class="material-icons-outlined ico_delete" aria-hidden="true">delete</span>',t=v(),c&&c.c(),a=v(),S(s.$$.fragment),u=v(),o=w("ul");for(let l=0;l<r.length;l+=1)r[l].c();$(n,"type","button"),$(n,"class","btn btn_danger btn_init"),$(e,"class","info_setting"),$(o,"class","list_todo")},m(l,i){T(l,e,i),h(e,n),h(e,t),c&&c.m(e,null),h(e,a),I(s,e,null),T(l,u,i),T(l,o,i);for(let k=0;k<r.length;k+=1)r[k].m(o,null);f[6](o),b=!0,g||(y=K(n,"click",f[3]),g=!0)},p(l,i){l[0]?c?(c.p(l,i),i&1&&d(c,1)):(c=F(l),c.c(),d(c,1),c.m(e,a)):c&&(M(),_(c,1,1,()=>{c=null}),R()),i&4&&(m=l[2],M(),r=V(r,i,J,1,l,m,p,o,Q,H,null,A),R())},i(l){if(!b){d(c),d(s.$$.fragment,l);for(let i=0;i<m.length;i+=1)d(r[i]);b=!0}},o(l){_(c),_(s.$$.fragment,l);for(let i=0;i<r.length;i+=1)_(r[i]);b=!1},d(l){l&&L(e),c&&c.d(),j(s),l&&L(u),l&&L(o);for(let i=0;i<r.length;i+=1)r[i].d();f[6](null),g=!1,y()}}}function F(f){let e,n;return e=new ne({props:{tit_layer:"Todo \uBAA9\uB85D\uC744 \uBAA8\uB450 \uCD08\uAE30\uD654 \uC2DC\uD0A4\uACA0\uC2B5\uB2C8\uAE4C?",btn_fn1:f[4],btn_fn2:f[5]}}),{c(){S(e.$$.fragment)},m(t,a){I(e,t,a),n=!0},p:P,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){j(e,t)}}}function H(f,e){let n,t,a;return t=new ee({props:{todo:e[11]}}),{key:f,first:null,c(){n=D(),S(t.$$.fragment),this.first=n},m(s,u){T(s,n,u),I(t,s,u),a=!0},p(s,u){e=s;const o={};u&4&&(o.todo=e[11]),t.$set(o)},i(s){a||(d(t.$$.fragment,s),a=!0)},o(s){_(t.$$.fragment,s),a=!1},d(s){s&&L(n),j(t,s)}}}function le(f){let e,n,t,a,s,u;a=new te({});let o=f[2].length&&E(f);return{c(){e=w("div"),n=w("h1"),n.textContent="Todo List",t=v(),S(a.$$.fragment),s=v(),o&&o.c(),$(n,"class","tit_todo"),$(e,"class","container")},m(r,p){T(r,e,p),h(e,n),h(e,t),I(a,e,null),h(e,s),o&&o.m(e,null),u=!0},p(r,[p]){r[2].length?o?(o.p(r,p),p&4&&d(o,1)):(o=E(r),o.c(),d(o,1),o.m(e,null)):o&&(M(),_(o,1,1,()=>{o=null}),R())},i(r){u||(d(a.$$.fragment,r),d(o),u=!0)},o(r){_(a.$$.fragment,r),_(o),u=!1},d(r){r&&L(e),j(a),o&&o.d()}}}function re(f,e,n){let t,a;N(f,C,m=>n(2,t=m)),N(f,q,m=>n(8,a=m));const s=localStorage.getItem("todos");s&&O(C,t=JSON.parse(s),t);const u=localStorage.getItem("isListRecent");JSON.parse(u)||(O(q,a=!0,a),O(C,t=t.reverse(),t),Z());let o=!1;function r(){n(0,o=!0)}function p(){O(C,t=[],t),Y(),n(0,o=!1)}function b(){n(0,o=!1)}let g,y;X(()=>{y=new W(g,{group:"Todo Lists",handle:".list_todo .btn_move",delay:50,animation:0,forceFallback:!0,onEnd(m){x({oldIndex:m.oldIndex,newIndex:m.newIndex})}})});function c(m){B[m?"unshift":"push"](()=>{g=m,n(1,g)})}return[o,g,t,r,p,b,c]}class se extends z{constructor(e){super();G(this,e,re,le,U,{})}}export default se;
